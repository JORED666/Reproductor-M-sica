<div class="p-6">
  <h2 class="text-xl font-semibold mb-6">Resultados de bÃºsqueda</h2>

  <!-- ğŸŸ¢ Verifica si hay resultados -->
  <div *ngIf="results; else noResults">

    <!-- ğŸ† Top resultados -->
    <h3 class="text-lg font-bold mb-4">Top resultados</h3>
    <div class="grid grid-cols-3 gap-4 mb-10">

      <!-- ğŸµ CanciÃ³n principal -->
      <div *ngIf="results.tracks?.items?.length"
           (click)="openTrack(results.tracks.items[0])"
           class="bg-neutral-800 rounded-lg p-4 hover:bg-neutral-700 cursor-pointer transition">
        <img [src]="results.tracks.items[0].album.images[0]?.url" 
             class="rounded-md w-full mb-2" />
        <h4 class="font-semibold">{{ results.tracks.items[0].name }}</h4>
        <p class="text-sm text-gray-400">
          CanciÃ³n Â· {{ results.tracks.items[0].artists[0]?.name }}
        </p>
      </div>

      <!-- ğŸ¤ Artista destacado -->
      <div *ngIf="results.artists?.items?.length"
           [routerLink]="['/artist', results.artists.items[0].id]"
           class="group relative bg-gradient-to-b from-neutral-800 to-neutral-900 rounded-2xl p-6 cursor-pointer overflow-hidden hover:scale-105 hover:shadow-2xl transition-all duration-300 text-center">
        <div class="absolute inset-0 opacity-20 group-hover:opacity-30 transition">
          <img [src]="results.artists.items[0].images[0]?.url || 'https://via.placeholder.com/400'" 
               alt="Fondo artista"
               class="w-full h-full object-cover blur-2xl" />
        </div>
        <div class="relative z-10 flex flex-col items-center">
          <img [src]="results.artists.items[0].images[0]?.url || 'https://via.placeholder.com/200'" 
               class="rounded-full w-40 h-40 object-cover border-4 border-neutral-700 shadow-lg mb-3 group-hover:border-green-500 transition-all" />
          <h4 class="text-lg font-bold text-white mb-1">
            {{ results.artists.items[0].name }}
          </h4>
          <p class="text-sm text-green-400 tracking-wide">Artista</p>
        </div>
      </div>

      <!-- ğŸ’¿ Ãlbum destacado -->
      <div *ngIf="results.albums?.items?.length"
           class="bg-neutral-800 rounded-lg p-4 hover:bg-neutral-700 cursor-pointer transition">
        <img [src]="results.albums.items[0].images[0]?.url"
             class="rounded-md w-full mb-2" />
        <h4 class="font-semibold">{{ results.albums.items[0].name }}</h4>
        <p class="text-sm text-gray-400">
          Ãlbum Â· {{ results.albums.items[0].artists[0]?.name }}
        </p>
      </div>
    </div>

    <!-- ğŸµ Canciones -->
    <h3 class="text-lg font-bold mb-4">Canciones</h3>
    <div class="grid grid-cols-5 gap-4 mb-10">
      <div *ngFor="let track of results.tracks?.items"
           (click)="openTrack(track)"
           class="bg-neutral-800 rounded-lg p-2 hover:bg-neutral-700 transition cursor-pointer">
        <img [src]="track.album.images[0]?.url" class="rounded-md w-full h-44 object-cover" />
        <p class="mt-2 font-semibold text-sm truncate">{{ track.name }}</p>
        <p class="text-xs text-gray-400 truncate">{{ track.artists[0]?.name }}</p>
      </div>
    </div>

    <!-- ğŸ’¿ Ãlbumes -->
    <h3 class="text-lg font-bold mb-4">Ãlbumes</h3>
    <div class="grid grid-cols-5 gap-4 mb-10">
      <div *ngFor="let album of results.albums?.items"
           class="bg-neutral-800 rounded-lg p-2 hover:bg-neutral-700 transition cursor-pointer">
        <img [src]="album.images[0]?.url" class="rounded-md w-full h-44 object-cover" />
        <p class="mt-2 font-semibold text-sm truncate">{{ album.name }}</p>
        <p class="text-xs text-gray-400 truncate">{{ album.artists[0]?.name }}</p>
      </div>
    </div>

    <!-- ğŸ‘¤ Artistas -->
    <h3 class="text-lg font-bold mb-4">Artistas</h3>
    <div class="grid grid-cols-6 gap-6">
      <div *ngFor="let artist of results.artists?.items"
           [routerLink]="['/artist', artist.id]"
           class="text-center hover:bg-neutral-800 rounded-xl p-4 cursor-pointer transition hover:scale-105 transform duration-300">
        <img [src]="artist.images[0]?.url || 'https://via.placeholder.com/200'" 
             class="rounded-full mx-auto mb-3 w-40 h-40 object-cover border-2 border-transparent hover:border-green-500 transition-all" />
        <p class="font-semibold text-sm truncate text-white group-hover:text-green-400">
          {{ artist.name }}
        </p>
      </div>
    </div>
  </div>

  <!-- ğŸ”´ No hay resultados -->
  <ng-template #noResults>
    <p class="text-gray-400 italic">No se encontraron resultados.</p>
  </ng-template>

  <!-- ğŸ§ Modal -->
  <div *ngIf="selectedTrack" class="fixed inset-0 bg-black/90 flex items-center justify-center z-50">
    <div class="bg-neutral-900 p-6 rounded-2xl w-[400px] text-center shadow-lg">
      <img [src]="selectedTrack.album.images[0]?.url" class="rounded-lg mb-4 w-full" />
      <h2 class="text-xl font-bold">{{ selectedTrack.name }}</h2>
      <p class="text-neutral-400">{{ selectedTrack.artists[0]?.name }}</p>

      <div class="flex justify-center gap-4 mt-6">
        <button 
          (click)="playPreview(selectedTrack.preview_url)" 
          [disabled]="!selectedTrack.preview_url"
          class="px-4 py-2 bg-green-600 rounded-full hover:bg-green-700 disabled:bg-gray-600 transition">
          â–¶ Reproducir
        </button>
        <button 
          (click)="closeTrack()" 
          class="px-4 py-2 bg-red-600 rounded-full hover:bg-red-700 transition">
          âœ– Cerrar
        </button>
      </div>
    </div>
  </div>
</div>
